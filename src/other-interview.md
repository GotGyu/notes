网络上公开的Rust面经整理

# Rust

1. `Copy` 和 `Clone` 的区别
2. `Rc` 的作用
3. 内部可变性是什么？需要使用标准库哪个结构体？
4. `Mutex<T>` 和 `RwLock<T>` 
   - 对 T 的要求有什么区别？
   - `RwLock` 在哪里比较好：并发读很多的情况
   - `Mutex` 在哪里比较好
5. `Sized` 的含义
6. 什么时候会用到 `PhantomData`？
7. `{struct A;std::mem::size_of::<A>()}`的值是多少？
8. `Pin<T>`的作用是？
9. 为什么需要`Pin`？
10. 如何创建一个自引用结构体？
11. `<T: 'static>`意味着`T`是全局变量/常量吗？
12. 一般有哪些操作是需要unsafe来达成的？
13. unsafe意味着不安全吗？
14. 类型转换，i32是否可以传给`i64`形参，写一个泛型函数，同时支持`i64`和`i32`形参
15. 写个结构体，设置默认值并打印它
16. `derive` 派生能派生哪些属性
17. `async` 优雅关闭
18. fn Fn FnMut FnOnce 的区别
19. Rust 相比 C++ 的好处
    - 实现统一，不会出现不同平台不同行为的情况，不太容易碰到 UB
    - 包管理工具管理依赖很方便
    - 内存安全
    - 函数式风格，优雅、性能好
20. 用Rust获得安全的同时可能会影响效率，考虑效率优先还是安全优先？
21. 问Rust的时候问xx在C++里对应什么？如指针
22. 程序有哪些section，由什么组成？程序启动的过程？
23. 怎么判断数据分配在栈上还是分配在堆上?
24. Rust的常用trait
25. 锁有几种？说一下锁中毒
    - 持有锁的时候发生panic好像就是锁中毒
26. Trait Objct
27. 详细问了动态分发和静态分发及相关效率影响
28. 详细问了 `Deref`， `Drop`等基础trait

## 智能指针

1. 了解哪些智能指针？
2. 提到KDTree，父亲孩子相互引用，问 `Rc<T>` 和 `Weak<T>`
3. `Cell` 和 `RefCell`
   - 内部可变性
4. `BTreeMap` 的实现
   - B-Tree 是动态数目子节点，有分裂-合并操作的，对有 Cache 的现代 CPU 而言性能更好，比传统二叉树性能更好，因为它一次性拿比较多的数据出来可以填到一个 Cache Line 里
5. `Box`

## 多线程

1. 用的哪个运行时，Tokio 还是 Async-std？
2. 讲一下 Async 的 Future
3. 讲一下 `Send` 和 `Sync`
   - 多线程的时候需要加上，编译器会自己推断一个结构是否 `Send`, 是否 `Sync`

## 宏

1. 过程宏

# 八股

## 操作系统

1. 协程和线程的区别？什么时候用协程、什么时候用线程？rust为什么没有协程？
   - 其实rust的异步库实现的就是类似协程的东西，协程本质就是task，而且在用户态。应该讲一下用户态和内核态的关系
2. 一个 process 下两个 thread，一个 thread 是否可以访问另一个 thread 栈上的内容？
   - 一个 process 下是一个单独的地址空间，如果拿到栈指针就行，拿不到就不可以
3. 虚拟内存、分页、页表的组织形式

## 计组

1. 虚拟地址到物理地址怎么映射的?
2. 32位的系统能访问4gb以上的内存吗？
   - 我答的不能 面试官说可以去查一下最新的Linux 【intel新的x86硬件PAE支持36寻址空间，但是多出来的部分是虚拟的地址空间，单个应用程序估计无法使用到超过4GB的空间(32为系统的最大int是4GB)，只能是多个进程合起来能够使用到4G以外的内存】
3. IO方面的select/epoll

## 计网

1. 进程间通信的方式
2. TCP慢启动过程
3. TCP/IP三次握手
4. 重传机制(超时重传 快重传)
5. TCP拥塞控制算法、流量控制
6. 浏览器访问url的过程，从osi七层模型往下讲
7. HTTP头、几种请求方式、HTTPS原理、认证过程、HTTP 2.0、QUIC、50x错误意义
8. HTTP/1.1 的 Pipelining 和HTTP/2的多路复用的区别
9. TLS握手过程

## 数据库

1. 一个名为order的数据库，有date 和name字段，要查 date 、name以及name=?&&?<date<? 怎么建索引？ 
   - 我讲了联合索引，其实自己不懂联合索引，所以后面追问的答不出了。。。好像问了最左匹配
2. 索引、B+索引和Hash索引的优缺点
3. 重点问Hash索引实际处理方法
4. 事务
5. 表级锁和行级锁
6. sql优化
7. 区间查找

# 机试

要考虑复杂度

1. 背包

   直接把输入省了，硬编码了输入去写

   用了 `[Option<i32>; MAX_NUMBER]` 来保存背包，然后用了一些 Rust 的语法特性比如 `Option::map_or` 之类的，反正是写对了

2. n个不同长度有序数组合并为1个有序数组 问思路

   **[Merge k sorted lists](https://leetcode.com/problems/merge-k-sorted-lists/)**

   一开始想的暴力法，后面在提示下联想到归并排序 O(nlogn），算法实现 写了大概二十多分钟

3. 接雨水（没跑出来）

4. 输入一个数列，代表一个地区的高低起伏海拔，计算在潮水退去之后，这个数列代表的“坑洼地”能存放多少水

   ![byte-dance-interview-algorithm](https://blog.sbw.so/picture/art-198-1.png)

5. 两个从右往左的链表实现左对齐的加法

   ![byte-dance-interview-algorithm](https://blog.sbw.so/picture/art-198-2.png)

   6. 写一个函数，接收两个矩形然后输出是否相交，矩形的数据结构自己设计
   7. 俩人轮流丢硬币，谁先扔到正面谁羸。A 先扔，然后问他俩的胜率各是多少

# 项目

